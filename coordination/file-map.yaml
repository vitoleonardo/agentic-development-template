# File Map - Module ownership and path rules
# Next.js App Router: no src/router; routes are src/app/**/page.tsx
# See contracts/tech-stack.yaml
#
# When growth path is chosen (contracts/monorepo.yaml):
#   Use apps/web/*, apps/api/*, packages/shared/*. Shared package is
#   single source for types/schemas; no duplicate models in web or api.

version: "1.0"

module-roots:
  app:
    path: src/app/
    owner: any
    description: Next.js App Router (layout, pages, api, error, loading)

  features:
    path: src/features/
    owner: track-assigned
    description: Feature modules (track-isolated)

  components:
    path: src/components/
    owner: any
    description: Shared UI (layout, ui from shadcn)

  lib:
    path: src/lib/
    owner: any
    description: Shared utilities, db (Prisma), auth

  types:
    path: src/types/
    owner: any
    description: Shared TypeScript types

  tests:
    path: tests/
    owner: any
    description: Test files

  storybook:
    path: storybook/
    owner: any
    description: Storybook stories

track-boundaries:
  track-a:
    allowed:
      - src/features/track-a-*/**
      - src/features/shared/**
      - src/components/**
      - src/app/**/page.tsx
      - tests/unit/track-a-*/**
      - tests/visual/track-a-*/**
      - storybook/stories/track-a-*/**
    forbidden:
      - src/features/track-b-*/**
      - tests/**/track-b-*/**
      - contracts/**
      - coordination/**

  track-b:
    allowed:
      - src/features/track-b-*/**
      - src/features/shared/**
      - src/components/**
      - src/app/**/page.tsx
      - tests/unit/track-b-*/**
      - tests/visual/track-b-*/**
      - storybook/stories/track-b-*/**
    forbidden:
      - src/features/track-a-*/**
      - tests/**/track-a-*/**
      - contracts/**
      - coordination/**

global-forbidden:
  - node_modules/**
  - dist/**
  - .next/**
  - .git/**
  - "*.log"
  - .env*
  - "**/*.secret.*"

shared-write-zones:
  - path: src/app/layout.tsx
    lock-required: true
    max-concurrent: 1

  - path: src/types/index.ts
    lock-required: true
    max-concurrent: 1

  - path: src/components/ui/**
    lock-required: false
    max-concurrent: 2

naming-rules:
  files: kebab-case
  directories: kebab-case
  components: PascalCase
  hooks: camelCase
  types: PascalCase
  constants: SCREAMING_SNAKE_CASE
